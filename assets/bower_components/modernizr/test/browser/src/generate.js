describe("generate",function(){var generate,cleanup;before(function(t){define("package",[],function(){return{}}),define("Modernizr",[],function(){return{}}),define("testRunner",[],function(){return{}}),define("lodash",[],function(){return window._}),define("ModernizrProto",[],function(){return{}});var e=requirejs.config({context:Math.random().toString().slice(2),baseUrl:"../src",paths:{cleanup:"../test/cleanup"}});e(["generate","cleanup"],function(e,n){generate=e,cleanup=n,t()})}),it("is a function",function(){expect(generate).to.be.a("function")}),it("does not blow up when no config is given",function(){expect(function(){generate()}).to.not.throwError()}),it("defines `feature-detects` if it is not on the config already",function(){var t={};generate(t),expect(t["feature-detects"]).to.not.be(void 0)}),it("does not overwrite `feature-detects` if it is defined already",function(){var t={"feature-detects":["fake"]};generate(t),expect(t["feature-detects"][0]).to.be("fake")}),describe("outputs feature detects when they are requested",function(){it("with amd prefix",function(){var t={"feature-detects":["test/fake"]},e=generate(t);expect(e).to.contain("test/fake")}),it("without amd prefix",function(){var t={"feature-detects":["fake"]},e=generate(t);expect(e).to.contain("test/fake")})}),it("adds `setClasses` and `classes` when defined",function(){var t={options:["setClasses"]},e=generate(t);expect(e).to.contain('setClasses", "classes')}),it("adds options when defined",function(){var t={options:["fakeOption"]},e=generate(t);expect(e).to.contain("fakeOption")}),it("only adds one of the shivs if both are defined",function(){var t={options:["html5shiv","html5printshiv"]},e=generate(t);expect(e).to.contain("html5printshiv"),expect(e).to.not.contain("html5shiv")}),it("outputs a valid function",function(){var output=generate({}),stashedRequire=window.require;window.require=function(){},expect(function(){eval(output)}).to.not.throwError(),window.require=stashedRequire}),it("outputs a valid function when minified",function(){var output=generate({minify:!0}),stashedRequire=window.require;window.require=function(){},expect(function(){eval(output)}).to.not.throwError(),window.require=stashedRequire}),it("does not modify options",function(){var t={options:["setClasses"]};generate(t),expect(t.options).to.eql(["setClasses"])}),after(function(){cleanup()})});